:host {
  --glow-color: var(--accent-color);
}

@keyframes rotate {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

/* mdi:robot-vacuum */
@keyframes robot-vacuum {

  /* 
  Top	(0, -5)
  Top-Right	(3.54, -3.54)
  Right	(5, 0)
  Bottom-Right	(3.54, 3.54)
  Bottom	(0, 5)
  Bottom-Left	(-3.54, 3.54)
  Left	(-5, 0) 
  Top-Left	(-3.54, -3.54)
  */

  /* Start in default location aka the center */
  0% {
    transform: translate(0px, 0px) rotate(0deg);
  }

  /* Move to topmost */
  5% {
    transform: translate(0px, -5px) rotate(0deg);
  }

  /* Point right so we can start moving along edge */
  12% {
    transform: translate(0px, -5px) rotate(90deg);
  }

  /* Start moving along path of circle */
  20% {
    transform: translate(3.54px, -3.54px) rotate(135deg);
  }

  /* Top-Right pointed down-right */
  30% {
    transform: translate(5px, 0px) rotate(180deg);
  }

  /* Rightmost pointed down */
  40% {
    transform: translate(3.54px, 3.54px) rotate(225deg);
  }

  /* Bottom-Right pointed down-left */
  50% {
    transform: translate(0px, 5px) rotate(270deg);
  }

  /* Bottommost pointed left*/
  60% {
    transform: translate(-3.54px, 3.54px) rotate(315deg);
  }

  /* Bottom-Left pointed up-left */
  70% {
    transform: translate(-5px, 0px) rotate(360deg);
  }

  /* Leftmost pointed up*/
  80% {
    transform: translate(-3.54px, -3.54px) rotate(405deg);
  }

  /* Top-Left pointed up-right */
  90% {
    transform: translate(0px, -5px) rotate(450deg);
  }

  /* Topmost pointed right*/

  /* We made it back to the topmost, lets recenter ourself */
  95% {
    transform: translate(0px, -5px) rotate(540deg);
  }

  /* Topmost pointed down */
  98% {
    transform: translate(0px, 0px) rotate(540deg);
  }

  /* Centered pointed down */
  100% {
    transform: translate(0px, 0px) rotate(720deg);
  }

  /* Reset to default (centered pointed up) */
}


@keyframes robot-vacuum {

  /* Move to top */
  0% {
    transform: translate(0px, 0px) rotate(0deg);
  }

  15% {
    transform: translate(0px, -10px) rotate(0deg);
  }

  /* Go around the edge */
  25% {
    transform: translate(0px, -10px) rotate(90deg);
  }

  26% {
    transform: translate(1.25px, -9.92px) rotate(97.2deg);
  }

  27% {
    transform: translate(2.49px, -9.69px) rotate(104.4deg);
  }

  28% {
    transform: translate(3.68px, -9.3px) rotate(111.6deg);
  }

  29% {
    transform: translate(4.82px, -8.76px) rotate(118.8deg);
  }

  30% {
    transform: translate(5.88px, -8.09px) rotate(126deg);
  }

  31% {
    transform: translate(6.85px, -7.29px) rotate(133.2deg);
  }

  32% {
    transform: translate(7.71px, -6.37px) rotate(140.4deg);
  }

  33% {
    transform: translate(8.44px, -5.36px) rotate(147.6deg);
  }

  34% {
    transform: translate(9.05px, -4.26px) rotate(154.8deg);
  }

  35% {
    transform: translate(9.51px, -3.09px) rotate(162deg);
  }

  36% {
    transform: translate(9.82px, -1.87px) rotate(169.2deg);
  }

  37% {
    transform: translate(9.98px, -0.63px) rotate(176.4deg);
  }

  38% {
    transform: translate(9.98px, 0.63px) rotate(183.6deg);
  }

  39% {
    transform: translate(9.82px, 1.87px) rotate(190.8deg);
  }

  40% {
    transform: translate(9.51px, 3.09px) rotate(198deg);
  }

  41% {
    transform: translate(9.05px, 4.26px) rotate(205.2deg);
  }

  42% {
    transform: translate(8.44px, 5.36px) rotate(212.4deg);
  }

  43% {
    transform: translate(7.71px, 6.37px) rotate(219.6deg);
  }

  44% {
    transform: translate(6.85px, 7.29px) rotate(226.8deg);
  }

  45% {
    transform: translate(5.88px, 8.09px) rotate(234deg);
  }

  46% {
    transform: translate(4.82px, 8.76px) rotate(241.2deg);
  }

  47% {
    transform: translate(3.68px, 9.3px) rotate(248.4deg);
  }

  48% {
    transform: translate(2.49px, 9.69px) rotate(255.6deg);
  }

  49% {
    transform: translate(1.25px, 9.92px) rotate(262.8deg);
  }

  50% {
    transform: translate(0px, 10px) rotate(270deg);
  }

  51% {
    transform: translate(-1.25px, 9.92px) rotate(277.2deg);
  }

  52% {
    transform: translate(-2.49px, 9.69px) rotate(284.4deg);
  }

  53% {
    transform: translate(-3.68px, 9.3px) rotate(291.6deg);
  }

  54% {
    transform: translate(-4.82px, 8.76px) rotate(298.8deg);
  }

  55% {
    transform: translate(-5.88px, 8.09px) rotate(306deg);
  }

  56% {
    transform: translate(-6.85px, 7.29px) rotate(313.2deg);
  }

  57% {
    transform: translate(-7.71px, 6.37px) rotate(320.4deg);
  }

  58% {
    transform: translate(-8.44px, 5.36px) rotate(327.6deg);
  }

  59% {
    transform: translate(-9.05px, 4.26px) rotate(334.8deg);
  }

  60% {
    transform: translate(-9.51px, 3.09px) rotate(342deg);
  }

  61% {
    transform: translate(-9.82px, 1.87px) rotate(349.2deg);
  }

  62% {
    transform: translate(-9.98px, 0.63px) rotate(356.4deg);
  }

  63% {
    transform: translate(-9.98px, -0.63px) rotate(363.6deg);
  }

  64% {
    transform: translate(-9.82px, -1.87px) rotate(370.8deg);
  }

  65% {
    transform: translate(-9.51px, -3.09px) rotate(378deg);
  }

  66% {
    transform: translate(-9.05px, -4.26px) rotate(385.2deg);
  }

  67% {
    transform: translate(-8.44px, -5.36px) rotate(392.4deg);
  }

  68% {
    transform: translate(-7.71px, -6.37px) rotate(399.6deg);
  }

  69% {
    transform: translate(-6.85px, -7.29px) rotate(406.8deg);
  }

  70% {
    transform: translate(-5.88px, -8.09px) rotate(414deg);
  }

  71% {
    transform: translate(-4.82px, -8.76px) rotate(421.2deg);
  }

  72% {
    transform: translate(-3.68px, -9.3px) rotate(428.4deg);
  }

  73% {
    transform: translate(-2.49px, -9.69px) rotate(435.6deg);
  }

  74% {
    transform: translate(-1.25px, -9.92px) rotate(442.8deg);
  }

  75% {
    transform: translate(0px, -10px) rotate(450deg);
  }

  /* Recenter ourself */
  80% {
    transform: translate(0px, -10px) rotate(540deg);
  }

  90% {
    transform: translate(0px, 0px) rotate(540deg);
  }

  100% {
    transform: translate(0px, 0px) rotate(720deg);
  }
}

@keyframes robot-vacuum-circle-only {
  0% {
    transform: translate(0px, -10px) rotate(90deg);
  }

  2% {
    transform: translate(1.25px, -9.92px) rotate(97.2deg);
  }

  4% {
    transform: translate(2.49px, -9.69px) rotate(104.4deg);
  }

  6% {
    transform: translate(3.68px, -9.3px) rotate(111.6deg);
  }

  8% {
    transform: translate(4.82px, -8.76px) rotate(118.8deg);
  }

  10% {
    transform: translate(5.88px, -8.09px) rotate(126deg);
  }

  12% {
    transform: translate(6.85px, -7.29px) rotate(133.2deg);
  }

  14% {
    transform: translate(7.71px, -6.37px) rotate(140.4deg);
  }

  16% {
    transform: translate(8.44px, -5.36px) rotate(147.6deg);
  }

  18% {
    transform: translate(9.05px, -4.26px) rotate(154.8deg);
  }

  20% {
    transform: translate(9.51px, -3.09px) rotate(162deg);
  }

  22% {
    transform: translate(9.82px, -1.87px) rotate(169.2deg);
  }

  24% {
    transform: translate(9.98px, -0.63px) rotate(176.4deg);
  }

  26% {
    transform: translate(9.98px, 0.63px) rotate(183.6deg);
  }

  28% {
    transform: translate(9.82px, 1.87px) rotate(190.8deg);
  }

  30% {
    transform: translate(9.51px, 3.09px) rotate(198deg);
  }

  32% {
    transform: translate(9.05px, 4.26px) rotate(205.2deg);
  }

  34% {
    transform: translate(8.44px, 5.36px) rotate(212.4deg);
  }

  36% {
    transform: translate(7.71px, 6.37px) rotate(219.6deg);
  }

  38% {
    transform: translate(6.85px, 7.29px) rotate(226.8deg);
  }

  40% {
    transform: translate(5.88px, 8.09px) rotate(234deg);
  }

  42% {
    transform: translate(4.82px, 8.76px) rotate(241.2deg);
  }

  44% {
    transform: translate(3.68px, 9.3px) rotate(248.4deg);
  }

  46% {
    transform: translate(2.49px, 9.69px) rotate(255.6deg);
  }

  48% {
    transform: translate(1.25px, 9.92px) rotate(262.8deg);
  }

  50% {
    transform: translate(0px, 10px) rotate(270deg);
  }

  52% {
    transform: translate(-1.25px, 9.92px) rotate(277.2deg);
  }

  54% {
    transform: translate(-2.49px, 9.69px) rotate(284.4deg);
  }

  56% {
    transform: translate(-3.68px, 9.3px) rotate(291.6deg);
  }

  58% {
    transform: translate(-4.82px, 8.76px) rotate(298.8deg);
  }

  60% {
    transform: translate(-5.88px, 8.09px) rotate(306deg);
  }

  62% {
    transform: translate(-6.85px, 7.29px) rotate(313.2deg);
  }

  64% {
    transform: translate(-7.71px, 6.37px) rotate(320.4deg);
  }

  66% {
    transform: translate(-8.44px, 5.36px) rotate(327.6deg);
  }

  68% {
    transform: translate(-9.05px, 4.26px) rotate(334.8deg);
  }

  70% {
    transform: translate(-9.51px, 3.09px) rotate(342deg);
  }

  72% {
    transform: translate(-9.82px, 1.87px) rotate(349.2deg);
  }

  74% {
    transform: translate(-9.98px, 0.63px) rotate(356.4deg);
  }

  76% {
    transform: translate(-9.98px, -0.63px) rotate(363.6deg);
  }

  78% {
    transform: translate(-9.82px, -1.87px) rotate(370.8deg);
  }

  80% {
    transform: translate(-9.51px, -3.09px) rotate(378deg);
  }

  82% {
    transform: translate(-9.05px, -4.26px) rotate(385.2deg);
  }

  84% {
    transform: translate(-8.44px, -5.36px) rotate(392.4deg);
  }

  86% {
    transform: translate(-7.71px, -6.37px) rotate(399.6deg);
  }

  88% {
    transform: translate(-6.85px, -7.29px) rotate(406.8deg);
  }

  90% {
    transform: translate(-5.88px, -8.09px) rotate(414deg);
  }

  92% {
    transform: translate(-4.82px, -8.76px) rotate(421.2deg);
  }

  94% {
    transform: translate(-3.68px, -9.3px) rotate(428.4deg);
  }

  96% {
    transform: translate(-2.49px, -9.69px) rotate(435.6deg);
  }

  98% {
    transform: translate(-1.25px, -9.92px) rotate(442.8deg);
  }

  100% {
    transform: translate(0px, -10px) rotate(450deg);
  }
}

/* Powershell script to generate the frames
# Define animation settings
$animationName = "robot-vacuum"
$totalSteps = 32
$radius = 10
$rotationOffset = 180  # Degrees

# Define percentage range
$startPercentage = 25
$endPercentage = 75
$percentageDelta = ($endPercentage - $startPercentage) / ($totalSteps)

# Define the starting position (X, Y) relative to the center
$startX = 0  # Example: Start at the middle-right of the circle
$startY = -10  # Example: Start at the top of the circle

# Calculate the starting angle using Atan2 (convert to degrees)
$startingAngle = [math]::Atan2($startY, $startX) * (180 / [math]::PI)
if ($startingAngle -lt 0) { $startingAngle += 360 }  # Ensure it's positive

# Angle step per frame
$angleStep = 360 / $totalSteps

# Initialize keyframes array
$keyframes = @()

# Generate keyframes
for ($i = 0; $i -lt $totalSteps; $i++) {
    $angle = ($startingAngle + ($i * $angleStep))
    $translateX = [math]::Round($radius * [math]::Cos([math]::PI * $angle / 180), 2)
    $translateY = [math]::Round($radius * [math]::Sin([math]::PI * $angle / 180), 2)
    $rotation = ($angle + $rotationOffset)
    $percentage = [math]::Round($startPercentage + ($i * $percentageDelta), 2)

    # Adjust the rotation to account for it starting off in a custom location
    if ($i-eq 0) { while ($rotation -ge 360) {$rotationOffset -= 360; $rotation = ($angle + $rotationOffset) } }

    $keyframes += "$percentage% { transform: translate($translateX`px, $translateY`px) rotate($rotation`deg); }"
}

# Output the CSS keyframes
Write-Host "@keyframes $animationName {"
$keyframes | ForEach-Object { Write-Host "  $_" }
Write-Host "}"

*/

@keyframes robot-vacuum-alt {

  /* Start in default location aka the center */
  0% {
    transform: translate(0px, 0px) rotate(0deg);
  }

  /* Move to topmost */
  10% {
    transform: translate(0px, -5px) rotate(0deg);
  }

  /* Move to top-right */
  20% {
    transform: translate(3.54px, -3.54px) rotate(45deg);
  }

  /* Move to rightmost */
  30% {
    transform: translate(5px, 0px) rotate(90deg);
  }

  /* Move to bottom-right */
  40% {
    transform: translate(3.54px, 3.54px) rotate(135deg);
  }

  /* Move to bottommost */
  50% {
    transform: translate(0px, 5px) rotate(180deg);
  }

  /* Move to bottom-left */
  60% {
    transform: translate(-3.54px, 3.54px) rotate(225deg);
  }

  /* Move to leftmost */
  70% {
    transform: translate(-5px, 0px) rotate(270deg);
  }

  /* Move to top-left */
  80% {
    transform: translate(-3.54px, -3.54px) rotate(315deg);
  }

  /* Back to topmost */
  90% {
    transform: translate(0px, -5px) rotate(360deg);
  }

  /* Center and reset rotation */
  100% {
    transform: translate(0px, 0px) rotate(0deg);
  }
}


/* @keyframes robot-vacuum {
  0% { transform: translate(0px, 5px) rotate(0deg); }
  5% { transform: translate(0px, -5px) rotate(0deg); }
  10% { transform: translate(0px, -5px) rotate(180deg); }
  15% { transform: translate(0px, 0px) rotate(180deg); }
  20% { transform: translate(0px, 0px) rotate(-45deg); }
  25% { transform: translate(-5px, 0px) rotate(-45deg); }
  30% { transform: translate(-5px, 0px) rotate(135deg); }
  35% { transform: translate(0px, 0px) rotate(180deg); }
  40% { transform: translate(0px, 0px) rotate(45deg); }
  45% { transform: translate(5px, 0px) rotate(45deg); }
  50% { transform: translate(5px, 0px) rotate(-135deg); }
  55% { transform: translate(0px, 0px) rotate(-135deg); }
  60% { transform: translate(0px, 0px) rotate(135deg); }
} */

/* @keyframes robot-vacuum {
  0% { transform: translate(0px, 5px) rotate(0deg); }
  10% { transform: translate(0px, 0px) rotate(0deg); }
  25% { transform: translate(-5px, 0px) rotate(-45deg); }
  40% { transform: translate(0px, 0px) rotate(0deg); }
  50% { transform: translate(0px, -5px) rotate(0deg); }
  65% { transform: translate(0px, 0px) rotate(0deg); }
  75% { transform: translate(5px, 0px) rotate(45deg); }
  90% { transform: translate(0px, 0px) rotate(0deg); }
  95% { transform: translate(0px, 0px) rotate(180deg); }
  100% { transform: translate(0px, 5px) rotate(0deg); }
} */

/* Any icon */
@keyframes wobble-grow {
  0% {
    transform: rotate(0deg) scale(1);
  }

  15% {
    transform: rotate(-5deg) scale(1.15);
  }

  30% {
    transform: rotate(5deg) scale(1.15);
  }

  45% {
    transform: rotate(-3deg) scale(1.15);
  }

  60% {
    transform: rotate(3deg) scale(1.15);
  }

  75% {
    transform: rotate(-2deg) scale(1.15);
  }

  100% {
    transform: rotate(2deg) scale(1);
  }
}

/*mdi:kettle-steam */
@keyframes kettle-steam {

  0%,
  100% {
    transform: translate(1px, -1px) rotate(5deg);
  }

  10% {
    transform: translate(-1px, 2px) rotate(-10deg);
    clip-path: polygon(0 0, 66% 10%, 67% 30%, 88% 52%, 100% 100%, 0 100%);
  }

  20% {
    transform: translate(3px, -2px) rotate(8deg);
  }

  30% {
    transform: translate(-3px, 1px) rotate(-7deg);
  }

  40% {
    transform: translate(2px, -3px) rotate(6deg);
  }

  50% {
    transform: translate(-2px, 3px) rotate(-5deg);
  }

  60% {
    transform: translate(1px, -1px) rotate(4deg);
  }

  70% {
    transform: translate(-1px, 2px) rotate(-3deg);
  }

  80% {
    transform: translate(3px, -2px) rotate(2deg);
  }

  90% {
    transform: translate(-3px, 1px) rotate(-1deg);
  }
}

/* mdi:motion-sensor */
@keyframes motion-sensor-flash {
  50% {
    clip-path: polygon(0 0, 55% 0, 100% 100%, 0 100%);
  }
}

@keyframes motion-sensor-radial {
  0% {
    clip-path: polygon(50% 0, 100% 100%, 0 100%, 0 0);
  }

  /* 0 Rays */
  33% {
    clip-path: polygon(89% 14%,
        85% 3%,
        62% 3%,
        73% 100%,
        0 100%,
        0 0,
        100% 0,
        100% 15%);
  }

  /* 1 Ray */
  66% {
    clip-path: polygon(80% 22%,
        72% 2%,
        62% 3%,
        73% 100%,
        0 100%,
        0 0,
        100% 0,
        100% 27%);
  }

  /* 2 Rays */
  100% {
    clip-path: inset(0);
  }

  /* Full Icon */
}

@keyframes blink {

  0%,
  100% {
    clip-path: inset(0);
  }

  /* Fully visible */
  50% {
    clip-path: inset(100%);
  }

  /* Fully invisible */
}

/* Copied from my old phone card 
 * Should prob review it all
*/
@keyframes phone-ringing {
  0% {
    transform: rotate(0deg) scale(1);
    /* Normal size */
  }

  10% {
    transform: rotate(-15deg) scale(1.5);
    /* Grow and tilt */
  }

  20% {
    transform: rotate(15deg) scale(1.5);
    /* Tilt the other way, still grown */
  }

  30% {
    transform: rotate(-10deg) scale(1.5);
    /* Shake back */
  }

  40% {
    transform: rotate(10deg) scale(1.5);
    /* Shake forward */
  }

  50% {
    transform: rotate(-5deg) scale(1.5);
    /* Shake smaller angle */
  }

  60% {
    transform: rotate(5deg) scale(1.5);
    /* Shake smaller angle */
  }

  70% {
    transform: rotate(0deg) scale(1.5);
    /* Stabilize but still grown */
  }

  100% {
    transform: rotate(0deg) scale(1);
    /* Back to normal size and position */
  }
}

@keyframes pulsating-glow {
  0% {
    filter: drop-shadow(0 0 0px);
  }

  50% {
    filter: drop-shadow(0 0 100px);
  }
}

@keyframes breathing-glow {

  0%,
  100% {
    filter: drop-shadow(0 0 3px) drop-shadow(0 0 5px);
  }

  50% {
    filter: drop-shadow(0 0 3px) drop-shadow(0 0 5px) drop-shadow(0 0 25px) drop-shadow(0 0 50px);
  }
}

@keyframes breathing-glow-alt {

  0%,
  100% {
    filter: drop-shadow(0 0 5px var(--glow-color));
  }

  50% {
    filter: drop-shadow(0 0 5px var(--glow-color)) drop-shadow(0 0 10px var(--glow-color));
  }
}

/* end of copy from old phone card */


/* Flashing animation */
@keyframes flash {
  0% {
    opacity: 1;
    /* Fully visible */
  }

  50% {
    opacity: 0;
    /* Fully invisible */
  }

  100% {
    opacity: 1;
    /* Back to visible */
  }
}

.breathing-glow {
  animation: breathing-glow 7s infinite;
}

[data-entity$="_error"]:not([data-state="off"]):not([data-state="idle"]):not([data-state="ok"]):not([data-state="normal"]),
.breathing-glow-alt {
  animation: breathing-glow-alt 3s infinite;
}



.bluetooth-connect,
[data-state="Transmitting"] ha-icon[icon="mdi:bluetooth"],
[data-state]:not([data-state="0"]):not([data-state="off"]) ha-icon[icon="mdi:bluetooth-connect"] {
  animation: breathing-glow 7s ease-in-out infinite;
}

.robot-vacuum,
[data-state="starting"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="remote_control_active"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="cleaning"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="returning_home"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="spot_cleaning"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="going_to_target"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="zoned_cleaning"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="segment_cleaning"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="going_to_wash_the_mop"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="patrol"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="mapping"] ha-icon[icon="mdi:robot-vacuum"],
[data-state="egg_attack"] ha-icon[icon="mdi:robot-vacuum"] {
  animation: robot-vacuum 15s linear infinite;
}

.robot-vacuum-circle-only {
  animation: robot-vacuum-circle-only 15s linear infinite;
}

/* Catch all for anything in an bad state */
[data-state="unavailable"] ha-icon,
[data-state="unknown"] ha-icon {
  color: var(--error-color);
  animation: flash 1s ease-in-out infinite;
}

[data-state="unavailable"] .icon-container,
[data-state="unknown"] .icon-container {
  color: var(--error-color);
}


/* [data-state="on"][data-entity^="fan."],
[data-state="on"] ha-icon[icon="mdi:fan"] {
  animation: rotate 1.5s linear infinite
} */

/* [data-state="on"][data-entity^="fan."] ha-icon {
  animation: rotate 1.5s linear infinite
} */

ha-icon[icon="mdi:fan"][data-state="on"],
[data-state="on"] ha-icon[icon="mdi:fan"] {
  animation: rotate 1.5s linear infinite
}
