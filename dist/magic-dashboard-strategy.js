(()=>{"use strict";var t={0:(t,e,n)=>{var i=n(960);function a(t,e,n,a,o){let s=[];const r="sensor.rosey_the_robot_current_room";s.push({entity:r,icon:"mdi:robot-vacuum",name:"Robot Vacuum",visibility:[{condition:"state",entity:r,state:a.name}]});a.area_id;const c=i.WS(o,{domain:"binary_sensor",platform:"magic_areas","attributes.device_class":"occupancy"}).filter((t=>t.attributes&&t.attributes.type))[0];c&&s.push({entity:c.entity_id,name:"Magic Areas State",state_background:!1,show_background:!1,show_icon:!1,show_state:!0,tap_action:{action:"navigate",navigation_path:"#occupancy"}}),s.push({name:"Area Link",icon:"mdi:information",state_background:!1,show_background:!1,tap_action:{action:"navigate",navigation_path:`/config/areas/area/${a.area_id}`}});return{type:"custom:bubble-card",card_layout:"large",card_type:"separator",name:a.name,icon:a.icon||"mdi:information",sub_button:s,grid_options:{columns:"full"},modules:i.Xd}}function o(t,e="",n=void 0){return{type:"custom:bubble-card",card_type:"button",card_layout:"large",button_type:"name",show_icon:!1,show_name:!1,sub_button:t,styles:`.card-content {\n  width: 100%;\n  margin: 0 !important;\n}\n\n.bubble-sub-button {\n  height: 46px !important;\n  width: 46px !important;\n}\n.bubble-sub-button-container {\n  display: flex !important; width: 100%;\n  justify-content: ${t.length<3?"space-evenly":"space-between"} !important;\n}\n.bubble-sub-button-icon {\n  --mdc-icon-size: inherit !important;\n}\n.bubble-name-container {\n  margin-right: ${2===t.length?"-3%":"0px"} !important;\n}\n${e}`,columns:void 0!==n?n:Math.max(0,.7*t.length)}}function s(t){const e={action:"toggle",confirmation:{text:`This will toggle automation '${t.attributes.friendly_name}'.`}};return{type:"custom:bubble-card",card_type:"button",modules:i.Xd,entity:t.entity_id,sub_button:[{entity:t.entity_id,show_name:!1,name:"Trigger",icon:"mdi:play",show_state:!1,state_background:!1,tap_action:{action:"call-service",target:{entity_id:"entity"},data:{skip_condition:!1},service:"automation.trigger",confirmation:{text:`This will run automation '${t.attributes.friendly_name}'.`}},show_last_updated:!1,show_last_changed:!1,show_attribute:!1,attribute:"icon"},{entity:t.entity_id,show_name:!1,name:"Toggle Button",icon:"mdi:power",state_background:!1,show_state:!0,tap_action:e,show_last_updated:!1,show_last_changed:!1}],card_layout:"large",styles:".bubble-button-background {opacity: 0 !important;}",show_attribute:!0,show_last_updated:!1,show_last_changed:!1,attribute:"last_triggered",tap_action:{action:"more-info"},button_action:{tap_action:{action:"more-info"}},double_tap_action:{action:"none"},hold_action:{action:"none"}}}function r(t,e,n=void 0){return{type:"custom:bubble-card",card_type:"separator",modules:["default"],name:e,icon:t,card_layout:"normal",styles:n}}function c(t,e,n,i,a){const o={type:"custom:logbook-card",entity:t};return void 0!==e&&(o.history=e),void 0!==n&&(o.hidden_state=n),void 0!==i&&(o.date_format=i),void 0!==a&&(o.minimal_duration=a),o}function l(t,e){function n(t){return{type:"custom:bubble-card",card_type:"button",modules:["default"],button_type:"state",entity:t,show_last_changed:!0}}if(void 0===e)return null;e.entity_id,t.name;const i=`switch.magic_areas_presence_hold_${t.area_id}`,a=[...e.attributes.presence_sensors].sort().filter((t=>t!=i)).map((t=>n(t)));return{type:"vertical-stack",cards:[{type:"custom:bubble-card",card_type:"pop-up",modules:["default"],hash:"#occupancy",show_header:!0,button_type:"state",entity:e.entity_id,name:t.name,trigger_close:!1,icon:"",show_name:!0,show_last_changed:!0,show_attribute:!0,attribute:"states",show_state:!1,sub_button:[{entity:i,show_state:!1,show_name:!1,name:"Presence Hold",show_attribute:!1,show_last_updated:!1,show_last_changed:!1,tap_action:{action:"toggle"}}]},n(i),...a,c(e.entity_id,1,["unavailable","off"],"hh:mm A",1),function(t,e){let n=t.map((t=>({entity:t,hidden_state:["unavailable","off"]})));return n.push({entity:e,hidden_state:["unavailable","unknown","on"]}),{type:"custom:multiple-logbook-card",title:"Source Sensors' History",history:1,date_format:"hh:mm A",entities:n}}([...e.attributes.presence_sensors],e.entity_id)]}}function d(t){return void 0===t?null:"climate"==t.domain?(e=t.entity_id,{type:"custom:bubble-card",card_type:"climate",modules:i.Xd,entity:e,sub_button:[{name:"HVAC modes menu",select_attribute:"hvac_modes",state_background:!0,show_background:!0,show_arrow:!1,show_attribute:!1},{name:"Presets",select_attribute:"preset_modes",state_background:!0,show_background:!0,show_arrow:!1,show_name:!1,show_state:!1,show_attribute:!1,attribute:"preset_mode"},{entity:e,name:"Current Temperature",icon:"mdi:thermometer",state_background:!0,show_background:!0,show_attribute:!0,attribute:"current_temperature"}],force_icon:!1,show_name:!1,show_state:!1,show_last_changed:!1,show_attribute:!1,attribute:"hvac_action",rows:"1",card_layout:"large",show_last_updated:!1,show_icon:!0,scrolling_effect:!0,styles:".bubble-temperature-container { background-color: ${state !== 'off' ? 'var(--bubble-accent-color, var(--bubble-default-color))' : 'var(--bubble-climate-button-background-color, var(--bubble-secondary-background-color, var(--card-background-color, var(--ha-card-background))))'};}"}):"timer"==t.domain?function(t){return{type:"custom:bubble-card",card_type:"button",button_type:"state",entity:t.entity_id,show_attribute:!1,sub_button:[{entity:t.entity_id,show_attribute:!0,attribute:"finishes_at",visibility:[{condition:"state",entity:t.entity_id,state:"active"}],show_icon:!1},{entity:t.entity_id,tap_action:{action:"call-service",target:{entity_id:"entity"},service:"timer.start"},icon:"mdi:play",visibility:[{condition:"state",entity:t.entity_id,state_not:"active"}],name:"Start"},{entity:t.entity_id,tap_action:{action:"call-service",target:{entity_id:"entity"},service:"timer.pause"},icon:"mdi:pause",visibility:[{condition:"state",entity:t.entity_id,state:"active"}],name:"Pause"}],show_state:!0,attribute:"finishes_at",show_last_changed:!0}}(t):"binary_sensor"==t.domain?function(t){let e=u(t);"problem"===t.attributes?.device_class&&(e.visibility.push({condition:"state",entity:t.entity_id,state:"on"}),e.modules.push("colorize","animate"));return e}(t):"automation"==t.domain?s(t):u(t);var e}function u(t){return{type:"custom:bubble-card",card_type:"button",modules:i.Xd,entity:t.entity_id,button_type:"state",show_state:!0,show_last_changed:!0,show_attribute:!1,visibility:[]}}customElements.define("ll-strategy-view-magic-area",class{static async generate(t,e){const{area:n,devices:c,entities:u,mergedEntityMetadata:_}=t,m=i.cZ(_,n.area_id),b=[],h=i.WS(m,{domain:"binary_sensor",platform:"magic_areas","attributes.device_class":"occupancy"}).filter((t=>t.attributes&&t.attributes.type))[0];return b.push(i.vl([a(e,c,u,n,m),l(n,h)],4)),b.push(function(t,e){const n=[];if(n.push(...function(t){const e=i.WS(t,{platform:"adaptive_lighting",domain:"switch"}).filter((t=>t.original_name.startsWith("Adaptive Lighting:")))[0],n=t.filter((t=>"light"===t.domain));console.log(e);return n.map((t=>function(t,e,n){console.log(t),console.log(e);let a,o;void 0!==e&&(a=`\n      .bubble-sub-button-1 {\n        display: \${hass.states['${e.entity_id}'].attributes.autoreset_time_remaining && Object.keys(hass.states['${e.entity_id}'].attributes.autoreset_time_remaining).length === 0 ? 'none' : ''} !important;\n      }\n      \${(() => {\n\n        function addSecondsToNow(seconds) {\n            seconds = Math.round(seconds)\n            let currentDate = new Date();               // Get the current date and time\n            currentDate.setSeconds(currentDate.getSeconds() + seconds);  // Add the seconds to the current time\n            return currentDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});\n        }\n\n        function formatTime(seconds) {\n            seconds = Math.round(seconds)\n            let hrs = Math.floor(seconds / 3600);\n            let mins = Math.floor((seconds % 3600) / 60);\n            let secs = seconds % 60;\n\n            // Build the time string and remove leading zeros for hours, minutes, and seconds\n            let timeString = [];\n            if (hrs > 0) timeString.push(hrs);\n            if (mins > 0 || hrs > 0) timeString.push(mins.toString().padStart(2, '0'));\n            timeString.push(secs.toString().padStart(2, '0'));\n\n            return timeString.join(':');\n        }\n\n        function replaceTextInBraces(str, replacement) {\n            return str.replace(/{[^}]*}/g, replacement);\n        }\n\n\n        let subButton = card.querySelector('.bubble-sub-button-1 .bubble-sub-button-name-container');\n        if (subButton) {\n          let text = subButton.innerText.trim();\n          text = text.substring(0, text.length - 1);\n          let keyValue = text.split(':');\n          if (keyValue.length > 1) {\n            subButton.innerText = replaceTextInBraces(subButton.innerText, addSecondsToNow(keyValue[1]));\n          }\n        }\n      })()}\n      `,o={show_attribute:!0,show_last_changed:!1,show_state:!1,show_name:!0,show_icon:!1,attribute:"autoreset_time_remaining",state_background:!1,show_background:!1,name:"Manual Override",entity:e.entity_id,tap_action:{action:"perform-action",perform_action:"adaptive_lighting.set_manual_control",target:{},data:{manual_control:!1,entity_id:e.entity_id}},double_tap_action:{action:"none"},hold_action:{action:"none"}});return{type:"custom:bubble-card",card_layout:"large",card_type:"button",button_type:"slider",entity:t,scrolling_effect:!1,show_icon:!0,force_icon:!1,slider_live_update:!1,sub_button:[o,{name:"Menu",show_background:!1,icon:"mdi:menu"}],show_attribute:!0,attribute:"brightness",styles:"",show_state:!1,show_name:n,tap_action:{action:"toggle"},double_tap_action:{action:"more-info"},hold_action:{action:"more-info"},styles:a,modules:i.Xd}}(t.entity_id,e,n.length>1)))}(e)),0===n.length)return null;n.push(function(t,e){const n=`switch.adaptive_lighting_${t.area_id}`,i=`switch.adaptive_lighting_adapt_brightness_${t.area_id}`,a=`switch.adaptive_lighting_adapt_color_${t.area_id}`,s=`switch.adaptive_lighting_sleep_mode_${t.area_id}`;function r(t,e){let n=[];return void 0!==e&&n.push({condition:"state",entity:e,state:"on"}),{name:t,entity:t,tap_action:{action:"toggle"},visibility:n,hold_action:{action:"more-info"}}}const c=[],l=e.map((t=>t.entity_id));l.includes(n)&&(c.push(r(n)),l.includes(i)&&c.push(r(i,n)),l.includes(a)&&c.push(r(a,n)),l.includes(s)&&c.push(r(s,n)),c.push({name:"Apply Now",icon:"mdi:auto-fix",show_name:!1,show_last_changed:!1,show_attribute:!1,tap_action:{action:"perform-action",perform_action:"adaptive_lighting.apply",target:{},data:{entity_id:n}}}));if(0===c.length)return null;return o(c,void 0,4)}(t,e));const a=function(t,e){const n=`switch.magic_areas_presence_hold_${t.area_id}`,i=e.find((t=>"switch"===t.domain&&"magic_areas"===t.identifiers?.[0]?.[0]&&"Light Control"==t.original_name))?.entity_id;function a(t,e=void 0,n={}){let i=[];return void 0!==e&&i.push({condition:"state",entity:e,state:"on"}),{...{name:t,entity:t,tap_action:{action:"toggle"},visibility:i,hold_action:{action:"more-info"}},...n}}let s="";const r=[],c=e.map((t=>t.entity_id));let l={};c.includes(i)&&(r.push(a(i)),s=`\${subButtonIcon[0].setAttribute("icon", hass.states['${i}'].state === 'on' ? 'mdi:motion-sensor' : 'mdi:motion-sensor-off')}`,l={visibility:{condition:"or",conditions:[{condition:"state",entity:i,state:"on"},{condition:"state",entity:n,state:"on"}]}});c.includes(n)&&r.push(a(n,void 0,l));if(0===r.length)return null;return o(r,s)}(t,e);a&&n.push({type:"custom:bubble-card",card_type:"empty-column",columns:1.25},a);return n.unshift(r("mdi:lightbulb","Lights")),i.vl(n)}(n,m)),b.push(function(t,e){function n(t){function e(t){let e=1.2;return e+=.2*Math.floor(t/3),Math.min(e,4)}return{type:"custom:bubble-card",card_type:"button",entity:t.entity_id,icon:"mdi:fan",card_layout:"large",columns:e(t.name.length),tap_action:{action:"toggle"},double_tap_action:{action:"more-info"},hold_action:{action:"more-info"},modules:i.Xd}}const a=[],o=Object.values(i.Ni(e,"fan")).filter((e=>e.area_id===t.area_id));if(0===o.length)return null;const s=i.SK(`\n      const state = hass.states['${o[0].entity_id}'].state;\n      const entity_ids = [${o.map((t=>`"${t.entity_id}"`)).join(", ")}];\n      const allSame = entity_ids.every(entity_id => hass.states[entity_id].state === state);\n\n      if (allSame) {\n        icon.setAttribute('icon', 'mdi:fan')\n        icon.setAttribute('data-state', state)\n      } else { icon.removeAttribute('data-state')}\n  `);return a.push(r("mdi:fan","Fans",s)),a.push(...o.map((t=>n(t)))),i.vl(a)}(n,_)),b.push(i.vl(function(t){const e=[],n=i.WS(t,{platform:"litterrobot",domain:"vacuum"});if(n.forEach((n=>{const a=i.WS(t,{device_id:n.device_id}),o=a.filter((t=>t.entity_id.endsWith("_litter_level")))[0],s=a.filter((t=>t.entity_id.endsWith("_waste_drawer")))[0],r=a.filter((t=>t.entity_id.endsWith("_status_code")))[0],c=a.filter((t=>t.entity_id.endsWith("_pet_weight")))[0];let l=`\${icon.setAttribute("icon", ['cst', 'cd'].includes(hass.states['${r.entity_id}'].state) ? 'phu:litter-robot' : 'phu:litter-robot-empty')}`;l+=i.SK(`\n      if (hass.states['${n.entity_id}'].state === 'error') {\n        card.style.setProperty('--glow-color', 'var(--error-color)');\n        card.classList.add('breathing-glow-alt')\n      } else {\n        card.style.removeProperty('--glow-color');\n        card.classList.remove('breathing-glow-alt')\n      }\n\n      const nearly_full = 75;\n      const nearly_empty = 60;\n\n      const litter_button = card.querySelector('.bubble-sub-button-1');\n      if (hass.states['${o.entity_id}'].state <= nearly_full) {\n        litter_button.style.setProperty('--glow-color', 'var(--warning-color)');\n        litter_button.classList.add('breathing-glow-alt')\n      } else if (hass.states['${o.entity_id}'].state <= nearly_empty) {\n        litter_button.style.setProperty('--glow-color', 'var(--error-color)');\n        litter_button.classList.add('breathing-glow-alt')\n      } else {\n        litter_button.style.removeProperty('--glow-color');\n        litter_button.classList.remove('breathing-glow-alt')\n      }\n\n      const waste_button = card.querySelector('.bubble-sub-button-2');\n      if (hass.states['${s.entity_id}'].state >= nearly_full) {\n        waste_button.style.setProperty('--glow-color', 'var(--warning-color)');\n        waste_button.classList.add('breathing-glow-alt')\n      } else if (hass.states['${o.entity_id}'].state <= nearly_empty) {\n        waste_button.style.setProperty('--glow-color', 'var(--error-color)');\n        waste_button.classList.add('breathing-glow-alt')\n      } else {\n        waste_button.style.removeProperty('--glow-color');\n        waste_button.classList.remove('breathing-glow-alt')\n      }\n    `),l+=i.Dy();r.entity_id,c.entity_id;e.push({type:"custom:bubble-card",card_type:"button",button_type:"state",entity:n.entity_id,sub_button:[{entity:o.entity_id,show_name:!0,name:"Litter",show_attribute:!1,show_icon:!0,state_background:!1,show_background:!1,show_state:!0},{entity:s.entity_id,name:"Waste",show_name:!0,state_background:!1,show_background:!1,show_state:!0}],card_layout:"large-2-rows",show_state:!1,show_attribute:!0,attribute:"friendly_name",show_last_changed:!1,columns:4,styles:l,modules:[...i.Xd,"get_state_attribute"],get_state_attribute:[{entity:r.entity_id},{},{},{}]})})),0===e.length)return null;return e.unshift(r("mdi:cat","Cats")),e}(m))),b.push(i.vl(function(t){const e=[],n=["litterrobot"],a=i.WS(t,{domain:"vacuum"}).filter((t=>!n.includes(t.platform)));if(a.forEach((n=>{const a=i.WS(t,{device_id:n.device_id});console.log(a);const o={condition:"or",conditions:[{condition:"state",entity:n.entity_id,state:"returning"},{condition:"state",entity:n.entity_id,state:"cleaning"}]},s=a.filter((t=>"battery"===t.attributes?.device_class))[0],r=a.filter((t=>"status"===t.translation_key))[0],c=a.filter((t=>t.entity_id.endsWith("_error"))).map((t=>({entity:t.entity_id,show_attribute:!1,show_state:!0,show_name:!1,name:t.attributes.friendly_name,show_icon:!1,state_background:!1,show_background:!1,visibility:[{condition:"and",conditions:[{condition:"state",entity:t.entity_id,state_not:"none"},{condition:"state",entity:t.entity_id,state_not:"ok"},{condition:"state",entity:t.entity_id,state_not:"idle"},{condition:"state",entity:t.entity_id,state_not:"off"}]}]}))),l={entity:s.entity_id,show_attribute:!1,show_state:!0,show_name:!1,name:"Battery",show_icon:!0,state_background:!1,show_background:!1,visibility:[{condition:"state",entity:s.entity_id,state_not:"100"}]},d={entity:a.filter((t=>"Cleaning progress"===t.original_name))[0].entity_id,show_attribute:!0,show_state:!0,show_name:!1,name:"Cleaning Progress",show_icon:!0,visibility:[{condition:"state",entity:n.entity_id,state_not:"docked"}],icon:"mdi:vacuum",state_background:!0,show_background:!1},u={name:"Start",icon:"mdi:play",tap_action:{action:"call-service",target:{entity_id:"entity"},service:"vacuum.start"},visibility:[{condition:"state",entity:n.entity_id,state_not:"cleaning"},{condition:"state",entity:n.entity_id,state_not:"returning"}]},_=(n.entity_id,{name:"Pause",icon:"mdi:pause",state_background:!0,show_background:!0,visibility:[o],tap_action:{action:"call-service",target:{entity_id:"entity"},service:"vacuum.pause"}}),m={name:"Dock",icon:"mdi:home-import-outline",show_last_changed:!1,tap_action:{action:"call-service",target:{entity_id:"entity"},service:"vacuum.return_to_base"},visibility:[{condition:"state",entity:n.entity_id,state_not:"docked"},{condition:"state",entity:n.entity_id,state_not:"returning"}]},b="if (icon.getAttribute('icon') !== 'mdi:robot-vacuum') { icon.setAttribute('icon', \"mdi:robot-vacuum\")}",h=`\n    let desired_modules = []\n    if (hass.states['${r.entity_id}'].state === 'charging' && hass.states['${s.entity_id}'].state == 100) { // state might be string or int\n      desired_modules = this.config.modules.filter(item => item !== "get_state_attribute")  \n    } else {\n      desired_modules = [...this.config.modules];\n      if (!desired_modules.includes("get_state_attribute")) {\n          desired_modules.push("get_state_attribute");\n      }\n    }\n\n    // Since we are only adding and removing the last module, we can just compare the length\n    if (this.config.modules.length !== desired_modules.length) { this.config.modules = desired_modules; }\n    `,y=`\n      let has_error = false;\n      for (i=1; i<= ${c.length}; i++ ) {\n        const container = card.querySelector(\`.bubble-sub-button-\${i}\`)\n        if (!container.classList.contains('hidden')) {\n          has_error = true;\n          card.style.setProperty('--glow-color', 'var(--error-color)');\n          break;\n        }\n      }\n      card.classList.toggle('breathing-glow-alt', has_error) \n    `,g=i.SK(b,h,y);e.push({type:"custom:bubble-card",card_type:"button",button_type:"state",entity:n.entity_id,scrolling_effect:!1,show_attribute:!1,sub_button:[...c,l,d,u,_,m],card_layout:"large",columns:4,styles:g,modules:[...i.Xd,"get_state_attribute"],get_state_attribute:[{entity:r.entity_id},{},{},{}]})})),0===e.length)return null;return e.unshift(r("mdi:vacuum","Cleaning")),e}(m))),b.push(function(t,e){let n=[];n.push(r("mdi:thermostat","Climate Control")),n.push(function(t,e){const n=i.WS(t,{domain:"sensor",translation_key:"aggregate_temperature",platform:"magic_areas",area_id:e.area_id})[0];if(void 0===n)return null;const a=i.WS(t,{domain:"sensor",translation_key:"aggregate_temperature",platform:"magic_areas"}).find((t=>"magic_area_device_interior"===t.identifiers?.[0]?.[1])),o=t["sensor.outdoor_temperature"];let s;switch(o.attributes.unit_of_measurement){case"°F":default:s=32;break;case"°C":s=0;break;case"K":s=273.15}const r=o.state>s?"mdi:sun-thermometer":"mdi:snowflake-thermometer",c=[];void 0!==a&&c.push({entity:a.entity_id,name:"Indoors",show_name:!0,show_state:!0,state_background:!1,show_background:!0});void 0!==o&&c.push({entity:o.entity_id,name:"Outdoors",show_name:!0,show_state:!0,state_background:!1,show_background:!0,icon:r});return{type:"custom:bubble-card",card_type:"button",modules:i.Xd,auto_order:!1,button_type:"state",entity:n.entity_id,name:"Temperature",show_state:!0,show_last_changed:!1,show_name:!1,sub_button:c,card_layout:"large",grid_options:{columns:"full",rows:1},styles:i.SK(i.aL(`window.innerWidth <= ${i.eV}`))}}(t,e)),n.push(function(t,e){const n={domain:"sensor",translation_key:"aggregate_humidity",platform:"magic_areas"},a=i.WS(t,{...n,area_id:e.area_id})[0];if(void 0===a)return null;const o=i.WS(t,n).find((t=>"magic_area_device_interior"===t.identifiers?.[0]?.[1])),s=t["sensor.main_weather_humidity"],r=[];void 0!==o&&r.push({entity:o.entity_id,name:"Indoors",show_name:!0,show_state:!0,state_background:!1,show_background:!0});void 0!==s&&r.push({entity:s.entity_id,name:"Outdoors",show_name:!0,show_state:!0,state_background:!1,show_background:!0,icon:"mdi:cloud-percent"});return{type:"custom:bubble-card",card_type:"button",modules:i.Xd,auto_order:!1,button_type:"state",entity:a.entity_id,name:"Humidity",show_state:!0,show_last_changed:!1,show_name:!1,sub_button:r,card_layout:"large",grid_options:{columns:"full",rows:1},styles:i.SK(i.aL(`window.innerWidth <= ${i.eV}`))}}(t,e)),n.push(function(t,e){const n={domain:"sensor",translation_key:"aggregate_carbon_dioxide",platform:"magic_areas"},a=i.WS(t,{...n,area_id:e.area_id})[0];if(void 0===a)return null;const o=i.WS(t,n).find((t=>"magic_area_device_interior"===t.identifiers?.[0]?.[1])),s=[];void 0!==o&&s.push({entity:o.entity_id,name:"Indoors",show_name:!0,show_state:!0,state_background:!1,show_background:!0});return{type:"custom:bubble-card",card_type:"button",modules:i.Xd,auto_order:!1,button_type:"state",entity:a.entity_id,name:"Carbon Dioxide",show_state:!0,show_last_changed:!1,show_name:!1,sub_button:s,card_layout:"large",grid_options:{columns:"full",rows:1},styles:i.SK(i.aL(`window.innerWidth <= ${i.eV}`))}}(t,e));const a=i.WS(t,{domain:"climate",area_id:e.area_id}),o=i.WS(t,{area_id:e.area_id}).filter((t=>t.labels?.includes("climate")));if(i.oY([...a,...o].filter(((t,e,n)=>e===n.findIndex((e=>e.entity_id===t.entity_id))))).forEach((t=>{n.push(d(t))})),n=n.filter((t=>null!==t)),1===n.length)return null;return i.vl(n)}(_,n)),b.push(function(t){const e=i.WS(t,{domain:"automation"}).sort(((t,e)=>{const n=t.attributes?.friendly_name?.toLowerCase()||"",i=e.attributes?.friendly_name?.toLowerCase()||"";return n.localeCompare(i)})),n=e.map((t=>s(t)));if(0===n.length)return null;return n.unshift(r("mdi:robot","Automations")),i.vl(n)}(m)),b.push(function(t){const e=i.WS(t,{domain:"script"}).sort(((t,e)=>{const n=t.attributes?.friendly_name?.toLowerCase()||"",i=e.attributes?.friendly_name?.toLowerCase()||"";return n.localeCompare(i)})),n=e.map((t=>d(t)));if(0===n.length)return null;return n.unshift(r("mdi:script-text","Scripts")),i.vl(n)}(m)),i.w2(b),{type:"sections",title:n.name,max_columns:4,badges:[i.G2()],sections:b.filter((t=>null!==t))}}})},329:(t,e,n)=>{var i=n(960);customElements.define("ll-strategy-view-magic-weather",class{static async generate(t,e){const{devices:n,entities:a,weather_entity_id:o}=t,s="weather.home",r=[];return r.push(i.vl(function(){const t=i.SK(i.aL("window.innerWidth < 768")),e=!0;return{type:"custom:bubble-card",card_type:"button",button_type:"state",entity:"sensor.magic_areas_aggregates_interior_aggregate_temperature",name:"Indoors",sub_button:[{entity:"sensor.magic_areas_aggregates_interior_aggregate_carbon_dioxide",show_name:!1,show_icon:!0,state_background:!1,show_background:e,show_attribute:!1,attribute:"friendly_name",show_last_changed:!1,show_state:!0,name:"CO₂",visibility:[i.mV("sensor.magic_areas_aggregates_interior_aggregate_carbon_dioxide")]},{entity:"sensor.magic_areas_aggregates_interior_aggregate_humidity",show_name:!1,show_icon:!0,state_background:!1,show_background:e,show_attribute:!1,attribute:"friendly_name",show_last_changed:!1,show_state:!0,name:"Humidity",visibility:[i.mV("sensor.magic_areas_aggregates_interior_aggregate_humidity")]},{entity:"sensor.magic_areas_aggregates_interior_aggregate_volatile_organic_compounds_parts",show_name:!1,show_icon:!0,state_background:!1,show_background:e,show_attribute:!1,attribute:"friendly_name",show_last_changed:!1,show_state:!0,name:"VOC",visibility:[{condition:"screen",media_query:"(min-width: 768px)"},i.mV("sensor.magic_areas_aggregates_interior_aggregate_volatile_organic_compounds_parts")]}],card_layout:"large",grid_options:{columns:"full"},styles:t}}(),2)),r.push(i.vl({type:"custom:clock-weather-card",entity:s,show_humidity:!0,forecast_rows:7,apparent_sensor:"sensor.home_apparent_temperature"})),r.push(i.vl(function(t){return{type:"custom:clock-weather-card",entity:t,show_humidity:!1,hide_today_section:!0,hourly_forecast:!0,forecast_rows:24}}(s))),i.w2(r),{type:"sections",max_columns:2,sections:r,badges:[i.G2()]}}})},355:(t,e,n)=>{var i=n(960);const a="Individual Area Thermometers";function o(t,e,n){return"attributes"in t&&e in t.attributes&&t.attributes[e]===n}customElements.define("ll-strategy-view-magic-temperature",class{static async generate(t,e){const{mergedEntityMetadata:n}=t,s=Object.values(n).filter((t=>function(t,e){return o(t,"device_class",e)}(t,"temperature"))).filter((t=>null!==t.area_id)).filter((t=>!o(t,"restored",!0))).filter((t=>["living_room","office"].includes(t.area_id))).filter((t=>"magic_areas"!==t.platform)),r={type:"custom:plotly-graph",title:a,entities:s.map((t=>({entity:t.entity_id}))),hours_to_show:24,refresh_interval:10,layout:{xaxis:{tickformat:"%I:%M %p",rangeselector:{x:0,y:-.2,buttons:[{count:1,step:"minute"},{count:30,step:"minute"},{count:1,step:"hour"},{count:12,step:"hour"},{count:1,step:"day"},{count:7,step:"day"}]}}}};return[].push(i.vl([r],2)),result={type:"panel",title:a,cards:[r],badges:[i.G2()]},i.w2(result),result}})},510:(t,e,n)=>{var i=n(960);const a={type:"heading",icon:"",heading_style:"title",visibility:[{condition:"screen",media_query:"(min-width: 0px) and (max-width: 767px)"}],grid_options:{rows:.25}};function o(t,e){const n=[],a=`sensor.${t.attributes.id}_to_home`;a in e&&n.push({entity:a,name:"Time To Home",state_background:!1,show_background:!1,show_icon:!0,show_state:!0,show_name:!1,show_attribute:!1,show_last_updated:!0,visibility:[{condition:"state",entity:t.entity_id,state_not:"home"}]});const o=t.attributes&&Array.isArray(t.attributes.device_trackers)&&t.attributes.device_trackers.length>0?t.attributes.device_trackers[0]:void 0,s=o&&e[o]?e[o].device_id:void 0,r=`sensor.${o.split(".")[1]}_ble_transmitter`;let c,l;if(o&&e[r]&&e[r].attributes&&e[r].attributes.id){const t=e[r].attributes.id.replace(/-/g,"");l=i.WS(e,{platform:"bermuda",unique_id:`${t}_area_last_seen`}),console.log(l)}else console.warn("BLE sensor or phone entity ID not found for person:",t.entity_id);const d=Array.isArray(l)&&l.length>0?i.Tt(l[0].entity_id):i.Tt(t.entity_id);d.conditions.push({condition:"state",entity:r,state_not:"Transmitting"});const u=i.WS(e,{platform:"places","attributes.devicetracker_entityid":t.entity_id}),_=u&&u[0]?u[0]:t;n.push({entity:_.entity_id,name:"Location",show_state:!0,state_background:!1,show_background:!1,show_last_changed:!1,show_icon:!0,visibility:[d]}),Array.isArray(l)&&l.length>0&&(l=l[0],console.log(l.entity_id),n.push({name:"BLE Area",entity:l.entity_id,show_name:!1,show_last_changed:!1,show_state:!0,show_icon:!0,state_background:!0,show_background:!1,visibility:[{condition:"state",entity:r,state:"Transmitting"},i.mV(l.entity_id)]}),c=n.length-1),s&&n.push({name:"Phone Link",icon:"mdi:information-variant-circle-outline",state_background:!1,show_background:!1,tap_action:{action:"navigate",navigation_path:`/config/devices/device/${s}`}});const m={"background-image":`url("${t.attributes.entity_picture}")`,"background-size":"cover","--mdc-icon-size":"48px !important","clip-path":"circle()","margin-left":"0px !important","margin-right":"3% !important"};let b=`\n  .bubble-icon {\n    ${Object.entries(m).map((([t,e])=>`${t}: ${e};`)).join("\n    ")}\n  }\n  .bubble-name-container {\n    margin-right: 0px !important;\n  }\n`;return b+=i.SK(i.aL(`(hass.states['${t.entity_id}'].state !== 'home') & (window.innerWidth <= 480)`),`\n    if ((hass.states['${t.entity_id}'].state !== 'home') & (window.innerWidth <= 480)) {\n      card.querySelector(".bubble-name").style.display = 'none';\n    } else {\n      card.querySelector(".bubble-name").style.removeProperty('display');\n    }\n    `,`\n    const clickable = card.querySelector('.bubble-icon');\n    if (clickable.style.cursor !== 'pointer') {\n      clickable.style.cursor = 'pointer';\n      clickable.addEventListener("click", function() {\n        const event = new Event('hass-more-info', { bubbles: false, composed: true });\n\n        // Dispatch the event with the entity ID\n        event.detail = { entityId: '${t.entity_id}' };\n        card.dispatchEvent(event);\n      });\n    }\n`,`\n    // Only show "last updated" on time to home sensor when it hasn't been updated in lastUpdatedLimitMinutes minutes\n    const lastUpdatedLimitMinutes = 6;\n    const lastUpdatedLimit = new Date(Date.now() - lastUpdatedLimitMinutes * 60 * 1000);\n    const time_to_home_updated_recently = new Date(hass.states['${a}'].last_updated) >= lastUpdatedLimit;\n    if (time_to_home_updated_recently) {\n      const button = card.querySelector(".bubble-sub-button-1 .bubble-sub-button-name-container");\n      button.textContent = button.textContent.replace(/\\s·\\s\\d+\\s\\w+\\sago/, '')\n    }\n`,`\n    // Var to hold new icon\n    let location_based_icon;\n    const location = hass.states['${_.entity_id}'];\n\n    // If you are in a zone, use that zone's id\n    const person_state = hass.states['${t.entity_id}'].state;\n    if (person_state !== 'not_home') {\n      const zone_id = \`zone.\${person_state}\`; // TODO: Fix when this bug is fixed https://github.com/home-assistant/core/issues/123504#issuecomment-2676563143\n      try { location_based_icon = hass.states[zone_id].attributes.icon; } catch {}\n    }\n\n    // We are not in a zone so let's get an icon based on the place_type\n    else if (location?.attributes?.place_type) {\n      switch (location.attributes.place_type.toLowerCase()) { // Todo: see if we can get the higher level of place type like 'shop' instead of 'supermarket'\n        case "house":\n          location_based_icon = "mdi:home-switch";\n          break;\n        case "store":\n        case "shopping":\n        case "supermarket":\n          location_based_icon = "mdi:store";\n          break;\n        case "restaurant":\n          location_based_icon = "mdi:food";\n          break;\n        case "cafe":\n          location_based_icon = "mdi:coffee";\n          break;\n        case "bar":\n          location_based_icon = "mdi:beer";\n          break;\n        case "park":\n          location_based_icon = "mdi:tree";\n          break;\n        case "school":\n          location_based_icon = "mdi:school";\n          break;\n        case "hospital":\n          location_based_icon = "mdi:hospital";\n          break;\n        case "bank":\n          location_based_icon = "mdi:bank";\n          break;\n        case "post_office":\n          location_based_icon = "mdi:mailbox";\n          break;\n        case "place_of_worship":\n          location_based_icon = "mdi:church";\n          break;\n        case "theater":\n          location_based_icon = "mdi:theater";\n          break;\n        case "gym":\n          location_based_icon = "mdi:dumbbell";\n          break;\n        case "gas_station":\n          location_based_icon = "mdi:gas-station";\n          break;\n        case "pharmacy":\n          location_based_icon = "mdi:prescription";\n          break;\n      } // End switch\n  } // End if place_type exists\n\n  // Update the icon\n  if (location_based_icon !== undefined && subButtonIcon[1].icon !== location_based_icon) {\n    subButtonIcon[1].setAttribute("icon", location_based_icon);\n  }\n`),void 0!==c&&(b+=i.SK(`\n      let ble_area_id = hass.states['${l.entity_id}'].attributes.area_id;\n      if (!ble_area_id) { ble_area_id = hass.states['${l.entity_id}'].state.toLowerCase().replace(/ /g, "_")}\n      \n      if (ble_area_id) {\n        hass.callWS({ type: "config/area_registry/list" }).then((areas) => {\n          const ble_area = areas.find((area) => area.area_id === ble_area_id);\n          if (ble_area && ble_area.icon) {\n            this.config.sub_button[${c}].icon = ble_area.icon;\n          }\n        });\n      }\n      `)),{type:"custom:bubble-card",card_type:"separator",card_layout:"large",icon:t.attributes.entity_picture,styles:b,sub_button:n,name:t.attributes.friendly_name,grid_options:{columns:"full",rows:.6}}}function s(t,e){const n=t.attributes.device_trackers[0].split(".")[1],a=`sensor.${n}_bluetooth_connection`,o=`sensor.${n}_phone_state`,s=`sensor.${n}_ringer_mode`,l=`sensor.${n}_volume_level_ringer`,d=`sensor.${n}_sleep_confidence`,u=`sensor.${n}_remaining_charge_time`,_=`sensor.${n}_next_alarm`,m=`sensor.${n}_daily_steps`,b=`sensor.${n}_ble_transmitter`,h=[],y=(t,e)=>`${t}.${n}_${e}`,g={show_background:!0,state_background:!1,show_icon:!0,show_state:!1,show_attribute:!1,show_name:!1},p=t=>(t=>{if(!t)return!1;const n=e[t];return n&&(void 0===n.disabled_by||null===n.disabled_by||""===n.disabled_by)})(t.entity)?(h.push(t),h.length-1):null,f=p({...g,entity:d,name:"Sleep Confidence",visibility:[{condition:"numeric_state",entity:d,above:79}]}),w=p({...g,entity:y("binary_sensor","interactive"),name:"Interactive",visibility:[{condition:"state",entity:y("binary_sensor","interactive"),state_not:"off"}]}),v=(p({...g,entity:y("sensor","do_not_disturb_sensor"),name:"Do Not Disturb",visibility:[{condition:"state",entity:y("sensor","do_not_disturb_sensor"),state_not:"off"}],show_last_changed:!1}),p({...g,entity:y("sensor","ringer_mode"),name:"Ringer Mode",attribute:"options"}),p({...g,entity:y("sensor","phone_state"),name:"Phone State",state_background:!1,visibility:[{condition:"state",entity:y("sensor","phone_state"),state_not:"idle"}]})),k=(p({...g,entity:y("binary_sensor","android_auto"),name:"Android Auto",visibility:[{condition:"state",entity:y("binary_sensor","android_auto"),state_not:"off"}]}),p({...g,entity:y("binary_sensor","bluetooth_state"),name:"Bluetooth State"})),$=(p({...g,entity:b,name:"BLE",show_name:!0,visibility:[i.mV(b),{condition:"state",entity:b,state:"Transmitting"}]}),p({...g,entity:y("sensor","battery_level"),name:"Battery Level",show_state:!0}),p({...g,entity:u,name:"Remaining Charge Time",show_state:!0,visibility:[i.mV(u),{condition:"state",entity:u,state_not:"0"}]}),p({...g,entity:_,name:"Next Alarm",show_name:!0,visibility:[i.mV(_)]})),S=p({...g,entity:_,name:"Next Alarm",show_name:!0,visibility:[i.mV(_)]}),x=p({...g,entity:m,name:"Daily Steps",show_name:!1}),E=t.entity_id.split(".")[1];Object.values(e).filter((t=>t?.labels?.includes(E))).forEach((t=>{p({...g,entity:t.entity_id,name:t.attributes?.friendly_name??t.entity_id,show_state:!0})}));let L="";return L+="\n    /* Move the subbuttons up a little so theres not as much space */\n    .bubble-wrapper {\n       height: 75%\n    }",L+=`.bubble-sub-button-${f+1} {color: var(--purple-color)}\n`,L+=`.bubble-sub-button-${w+1} {color: var(--state-active-color)}\n`,L+=".break {\n    flex-basis: 100%;\n    height: 0; \n    margin-top: -4px; /* Cancels out one extra gap */\n    }\n",L+=i.SK(`\n      if (hass.states['${a}'].state > 0) {\n        if (this.config.sub_button[${k}].icon !== 'mdi:bluetooth-connect') {\n          this.config.sub_button[${k}].icon = 'mdi:bluetooth-connect';\n        }\n    } else { delete this.config.sub_button[${k}].icon }\n      `),L+=i.SK(`\n    // Update Phone Ringer Volume to a percentage\n    const target = card.querySelector('.bubble-sub-button-${v+1} .bubble-sub-button-name-container');\n    if (hass.states['${s}'].state === 'normal') {\n      const maxRingerVolume = 16\n      const ringerVolume = hass.states['${l}'].state;\n      const volumePercentage = Math.round((ringerVolume / maxRingerVolume) * 100);\n      target.innerText = \`\${volumePercentage}%\`;\n    } \n    else { target.innerText = '' }`),L+=i.SK(`\n      const phoneState = hass.states['${o}']?.state;  \n      if (phoneState === 'idle') {\n          this.config.sub_button[${v}].icon = "mdi:phone-hangup";\n      }\n      else if (phoneState === 'ringing') {\n          this.config.sub_button[${v}].icon = "mdi:phone-ring";\n      }\n      else if (phoneState === 'offhook') {\n          this.config.sub_button[${v}].icon = "mdi:phone-in-talk";\n      }  \n      else  {\n          delete this.config.sub_button[${v}].icon;\n      }\n      `),L+=i.SK(`\n    const alarmEntity = hass.states['${_}'];\n    const alarmTimeMs = alarmEntity?.attributes?.['Time in Milliseconds'];\n    if (alarmTimeMs === undefined) { return; }\n    ${r.toString()}\n    ${c.toString()}\n    const alarm_formatted_data = ${c.name}(alarmTimeMs)\n    this.config.sub_button[${$}].name=alarm_formatted_data.date;\n    this.config.sub_button[${S}].name=alarm_formatted_data.hours;\n\n    const alarmPkg = alarmEntity.attributes.Package.split('.').at(-1).toLowerCase().replace(/package$/, "")\n\n    if (alarmPkg.startsWith("clock") || alarmPkg.endsWith("clock")){}\n    else {\n      this.config.sub_button[${$}].name += ' | ' + alarmPkg.charAt(0).toUpperCase() + alarmPkg.slice(1);\n    }`),L+=i.SK(`\n    const container = card.querySelector(".bubble-sub-button-container");\n    if (!container) return;\n\n    const targetElement = container.querySelector('.bubble-sub-button-${$+1}');\n    if (!targetElement) return;\n\n    // Check if a break element already exists before the target\n    if (targetElement.previousElementSibling?.classList.contains("break")) return;\n\n    // Create the break element\n    const breakEl = document.createElement("div");\n    breakEl.classList.add("break");\n\n    // Insert before the target element\n    container.insertBefore(breakEl, targetElement);\n  `),L+=i.SK(`\n    const container = card.querySelector(".bubble-sub-button-container");\n    if (!container) return;\n\n    const targetElement = container.querySelector('.bubble-sub-button-${x+1}');\n    if (!targetElement) return;\n\n    // Check if a break element already exists before the target\n    if (targetElement.previousElementSibling?.classList.contains("break")) return;\n\n    // Create the break element\n    const breakEl = document.createElement("div");\n    breakEl.classList.add("break");\n\n    // Insert before the target element\n    container.insertBefore(breakEl, targetElement);\n  `),{type:"custom:bubble-card",card_type:"button",button_type:"name",show_icon:!1,show_state:!1,show_name:!1,sub_button:h,card_layout:"large",styles:L,modules:[...i.Xd,"bubble_chips"],grid_options:{columns:"full",rows:"auto"},bubble_chips:{gap:3,"justify-content":"flex-right"}}}function r(t){if(t%100>=11&&t%100<=13)return t+"th";switch(t%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}}function c(t){10===t.toString().length&&(t*=1e3);const e=new Date(t),n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),o=e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()&&e.getDate()===i.getDate(),s=e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate(),r=e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});let c;if(o)c=`Today @ ${r}`;else if(s)c=`Tomorrow @ ${r}`;else{c=`${e.toLocaleDateString("en-US",{weekday:"long"})} @ ${r}`}const l=Math.max(0,e-n)/36e5,d=Math.abs(l-Math.round(l))<.001?Math.round(l).toString():l.toFixed(1),u=d+(1===parseFloat(d)?" hour":" hours");return{date:c,hours:u,combined:`${c} | ${u}`}}customElements.define("ll-strategy-view-magic-people",class{static async generate(t,e){const{devices:n,entities:r,mergedEntityMetadata:c}=t,l=[],d=i.WS(c,{domain:"person"});d.forEach((t=>{const e=[a,o(t,c),s(t,c)];i.w2(e),l.push(i.vl(e))}));return{type:"sections",max_columns:Math.min(4,d.length),sections:l,badges:[i.G2()]}}})},858:(t,e,n)=>{var i=n(960);const a=(t,e)=>Object.fromEntries((t??[]).map((t=>[t[e],t]))),o=(...t)=>t.reduce(((t,e)=>{for(const[n,i]of Object.entries(e||{}))null!==i&&(t[n]=i);return t}),{}),s=t=>t?.split(".")[0];const r=({type:t,options:e,title:n,path:i,icon:a})=>({strategy:{type:t,options:e},title:n,path:i,icon:a});customElements.define("ll-strategy-view-magic-error",class{static async generate(t,e){const n=({name:t,icon:e,include:n,exclude:a=[],sort:o,infoHash:s,infoTitle:r,infoContent:c})=>{return l=((t,e)=>({type:"custom:bubble-card",card_type:"separator",name:t,icon:e,sub_button:[{name:"Info",icon:"mdi:help-circle",state_background:!1,show_background:!1,show_attribute:!1,show_last_changed:!1,tap_action:{action:"navigate",navigation_path:`#info-${t}`.toLowerCase()}},{show_background:!1,show_icon:!1,show_state:!1,name:" ",show_name:!0,tap_action:{action:"none"}}],card_layout:"large",modules:i.Xd,card_mod:i.IN}))(t,e),d=[{type:"custom:auto-entities",card:{type:"entities"},filter:{include:n,exclude:a},...o?{sort:o}:{}},{type:"vertical-stack",cards:[{type:"custom:bubble-card",card_type:"pop-up",hash:s,name:"",button_type:"name",show_header:!1},{type:"markdown",content:c,title:r}]}],{type:"custom:expander-card",expanded:!0,"title-card-button-overlay":!0,"title-card-clickable":!1,clear:!0,"title-card":l,cards:d};var l,d},a=[n({name:"Errors",icon:"mdi:alert-octagram-outline",include:[{entity_id:"*error*"}],exclude:[{state:"idle"},{state:"off"},{state:"none"},{state:"ok"}],infoHash:"#info-errors",infoTitle:"Errors",infoContent:"Any entities whose entity id indicates it represents an error. Those which are in a normal state such as `idle`, `off`, or `none` will not be displayed."}),n({name:"Unknown",icon:"mdi:progress-question",include:[{state:"unknown"}],exclude:[{entity_id:"^scene\\.*"},{entity_id:"^button\\.*"},{entity_id:"^input_button\\.*"},{entity_id:"^sensor\\.discord_user_.*\\D.*"},{integration:"waze_travel_time"}],sort:{method:"entity_id"},infoHash:"#info-unknown",infoTitle:"Unknown",infoContent:"Any entity whose state is currently `unknown`. This excludes some types which are always `unknown` such as `scene`, `button`, and `input_button`. Also excluded are those which are commonly `unknown` and have another entity on the device to indicate an issue, such as sensors included with the `discord_game` integration."}),n({name:"Unavailable",icon:"mdi:help-circle",include:[{state:"unavailable"}],exclude:[],sort:{method:"entity_id"},infoHash:"#info-unavailable",infoTitle:"Unavailable",infoContent:"Any entity whose state is currently `unavailable`. You should review these and determine if they should be deleted or otherwise determine how to start obtaining their state."}),n({name:"Alerts",icon:"mdi:alert-outline",include:[{entity_id:"^alert\\.*"}],exclude:[],sort:{method:"state"},infoHash:"#info-alerts",infoTitle:"Unavailable",infoContent:"Any alert entity regardless of status."})];return{type:"sections",max_columns:4,badges:[i.G2()],sections:a.map((t=>({type:"grid",cards:[t]}))),dense_section_placement:!0}}}),customElements.define("ll-strategy-dashboard-magic-dashboard-strategy",class{static async generate(t,e){const[n,i,c,l]=await Promise.all([e.callWS({type:"config/floor_registry/list"}),e.callWS({type:"config/area_registry/list"}),e.callWS({type:"config/device_registry/list"}),e.callWS({type:"config/entity_registry/list"})]),d=function(t,e,n,i){const r=a(e,"id"),c=new Set([...Object.values(n||{}).map((t=>t.entity_id)),...Object.keys(i||{})]),l={};for(const t of c){const e=(n||[]).find?.((e=>e.entity_id===t))||{},a=r[e?.device_id]||r[i?.[t]?.device_id]||{},c=i?.[t]||{},d=o({...a,domain:s(t)},e,c);l[t]=d}for(const e of t||[])l[`area.${e.area_id}`]=e;return l}(i,c,l,e.states);const u=a(n,"floor_id"),_=r({type:"custom:magic-temperature",options:{mergedEntityMetadata:d},title:"Temperature",path:"temperature",icon:"mdi:thermometer"}),m=r({type:"custom:magic-people",options:{devices:c,entities:l,mergedEntityMetadata:d},title:"People",path:"people",icon:"mdi:card-account-details"}),b=(i||[]).sort(((t,e)=>{const n=u[t.floor_id]?.level??0,i=u[e.floor_id]?.level??0;return n!==i?n-i:t.name.localeCompare(e.name)})).map((t=>r({type:"custom:magic-area",options:{area:t,devices:c,entities:l,mergedEntityMetadata:d},title:t.name,path:t.area_id,icon:t.icon||void 0}))),h="weather.home",y=e.states?.[h]?.state,g=(p=`mdi:weather-${y}`,new Set(["mdi:weather-sunny","mdi:weather-cloudy","mdi:weather-rainy","mdi:weather-lightning","mdi:weather-snowy","mdi:weather-fog","mdi:weather-windy","mdi:weather-hail","mdi:weather-partly-cloudy","mdi:weather-sunset","mdi:weather-night","mdi:weather-tornado","mdi:weather-hurricane","mdi:weather-snowy-rainy","mdi:weather-lightning-rainy","mdi:weather-sunny-off","mdi:weather-cloudy-alert","mdi:weather-partly-snowy-rainy"]).has(p)?p:"mdi:weather-sunny");var p;const f=[...b,m,r({type:"custom:magic-weather",options:{devices:c,entities:l,weather_entity_id:h},title:"Weather",path:"weather",icon:g}),_];return e.user?.is_admin&&f.push({strategy:{type:"custom:magic-error"},title:"Errors",path:"errors",icon:"mdi:alert-decagram"}),{views:f}}})},960:(t,e,n)=>{n.d(e,{Dy:()=>b,G2:()=>l,IN:()=>y,Ni:()=>o,SK:()=>d,Tt:()=>_,WS:()=>c,Xd:()=>h,aL:()=>m,cZ:()=>r,eV:()=>i,mV:()=>u,oY:()=>p,vl:()=>a,w2:()=>g});const i=1280;function a(t,e){if(t=Array.isArray(t)?t:[t],0===(t=t.filter((t=>null!=t))).length)return null;let n={type:"grid",cards:t};return e>0&&(n.column_span=e),n}function o(t,e){return Object.keys(t).filter((t=>t.startsWith(`${e}.`))).reduce(((e,n)=>(e[n]=t[n],e)),{})}function s(t){return t?Array.isArray(t)?t:Object.values(t):[]}function r(t,e,n=!1){let i=s(t).filter((t=>t.area_id===e));return n?i:p(i)}function c(t,e){return s(t).filter((t=>Object.entries(e).every((([e,n])=>{const i=function(t,e){return e.split(".").reduce(((t,e)=>t?t[e]:void 0),t)}(t,e);return i===n}))))}function l(){return{type:"custom:auto-entities",filter:{include:[{domain:"alert",state:"on",options:{type:"entity",content_info:"name",icon_color:"red"}}],exclude:[]},show_empty:!0,card_param:"chips",card:{type:"custom:mushroom-chips-card",alignment:"center"},grid_options:{columns:"full"},column_span:12}}function d(...t){return`\n\${(() => {\n  ${t.join(";\n  ")}\n})()}\n`}function u(t){const e=t?.entity_id||t;return{condition:"and",conditions:[{condition:"state",entity:e,state_not:"unknown"},{condition:"state",entity:e,state_not:"unavailable"}]}}function _(t){const e=t?.entity_id||t;return{condition:"or",conditions:[{condition:"state",entity:e,state:"unknown"},{condition:"state",entity:e,state:"unavailable"}]}}function m(t){return`if (${t}) {card.classList.add('rows-2')} else {card.classList.remove('rows-2')}`}function b(){return d("\n    if (!card.magicCSSAdded){\n      card.magicCSSAdded = true\n\n      // Create a <link> element inside the shadow root\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = '/local/strategies/magic-dashboard-strategy/animations.css?v=' + new Date().getTime();\n\n      // Append the <link> element to the shadow root\n      card.appendChild(link);\n    }\n    ")}const h=["default","state_attribute"],y={style:"\n@import url('/hacsfiles/magic-dashboard-strategy/colorize.css');\n@import url('/hacsfiles/magic-dashboard-strategy/animations.css');\n    "};function g(t){if(null!=t){if(Array.isArray(t)){const e=t.filter((t=>null!=t));if(0===e.length)return;if(e[0].hasOwnProperty("cards"))return void t.forEach((t=>{g(t)}))}Array.isArray(t)?t.forEach((t=>{void 0!==t&null!==t&&(t.card_mod=y)})):t.hasOwnProperty("cards")&&Array.isArray(t.cards)&&t.cards.forEach((t=>{null!=t&&(t.card_mod=y)}))}}function p(t){return t.filter((t=>!(t.hasOwnProperty("hidden_by")&&null!==t.hidden_by||t.hasOwnProperty("disabled_by")&&null!==t.disabled_by)))}}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(858),n(329),n(355),n(510),n(960);n(0)})();